# [04.04] Spark 분산처리 시도 및 이미지 분석 AI api

### Spark 분산처리
- ec2 서버에 CLIP 사용하는 Fast API 코드 올려서 테스트 진행
- MySQL에서 게시글 정보 가져오는 건 성공
- 유사도 비교는 실패
- 스파크는 돌아가는데 유사도 비교는 안되고 Fast API 호출을 하는지도 의문
- 호출 안한다면 9개 게시글 비교에 왜 1분이나 걸리는지도 의문
- 하둡, 엘라스틱 서치는 아직 연결 안함

### 이미지 분석 AI api 작성 : aianlyze
- RestTemplateConfig 위치
    - C:\Users\SSAFY\Desktop\S12P21C105\ssfinder-be\src\main\java\com\ssfinder\global\config
- ErrorCode 위치
    - C:\Users\SSAFY\Desktop\S12P21C105\ssfinder-be\src\main\java\com\ssfinder\global\common\response

### git 작업의 정석 (feat. 연수 티처)
1. 현재 작업중인 브랜치에서 작업이 완료
2. develop 브랜치 (be 브랜치)로 이동한다
3. develop 브랜치 update를 해서 최신상태로 만든다.
4. 다시 너의 브랜치로 이동한다
5. 이 때 Merge : develop 브랜치 업데이트 됐던 내용 → 작업 브랜치(너의 작업 공간에서 충돌 다 해결)
6. 머지 해결 한 후에 커밋, 이 내역을 다시 원격으로 push
7. 여기서 MergeRequest 날림 (충돌 안남 보장)
8. 리뷰 받음
9. 승인 후 머지 → 안전한 be 브랜치

- 귀찮을 때(혹은 내가 작업한 내용 별로 없을때)
    - 그냥 바로원격올리고 MR 때리기
    - 근데 충돌 안난다고 판단해준다? 그럼 ...그냥해

- 항상 너가 작업한 거 이제 develop에 반영하려고 할 때
1. run 실행시켜서 로컬에서 서버 돌아가는지 확인
2. application.properties 바뀐 내용 있으면 채널로 알려주기
3. 로컬로도 api 테스트 해보고 서버로도 api 테스트 확인하면 매너

### git MR(PR) 올린 후 충돌났을 때 해결법
- IntelliJ에서 develop 브랜치에서 merge 클릭 (작업 브랜치 → develop 브랜치)
- 충돌난 부분이 나오면 해결 후 commit에 내역 올라오면 commit 작성 (안올라오면 바로 올라간 것이니 패스)
- git에 충돌이 해결되어 있음
- Tip. IntelliJ에 Commit 탭에 가면 파일별로 commit 작성 가능

### 5001 포트 서버 여는 명령여
- uvicorn main:app --reload --port 5001