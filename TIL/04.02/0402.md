# [04.02] 최종 분실물 매칭 AI 구현 : CLIP + 형태소 분석

### ai-matching
- CLIP + BLIP 기반 ai matching 구현
- CLIP은 한국어 모델이 존재하지만 BLIP은 못찾음
- BLIP 로딩오류가 계속됨 (아마 모델 문제) → 해결 X
- CLIP만 써서 하는 방향으로

## 한국어 형태소 분석 모델 비교 : NLP 폴더
### Bareun vs Kiwi
1. Bareun(바른) NLP 형태소 분석기
- Bareun은 네이버에서 개발한 오픈소스 한국어 형태소 분석기:
- 장점:
    - 네이버의 방대한 데이터로 학습되어 정확도가 높다
    - pip로 쉽게 설치 가능: pip install bareunlp-apis
    - 로컬에서 실행되므로 API 호출 비용이 없다
    - 최신 한국어 어휘와 신조어 인식이 우수
    - 오픈소스로 무료 사용 가능
- 단점:
    - 비교적 최근에 공개되어 커뮤니티 지원이 Kiwi보다 적을 수 있다
    - 메모리 사용량이 다소 높을 수 있다

2. Kiwi 형태소 분석기
- 장점:
    - 속도: Mecab만큼 빠르거나 일부 경우 더 빠름 (초당 수십만 어절 처리 가능)
    - 정확도: 최신 언어 모델과 분석 알고리즘 사용으로 정확도가 매우 높음
    - 설치 용이성: pip로 간단히 설치 가능 (Mecab보다 설치가 훨씬 간단함, pip install kiwipiepy)
    - Python 친화적: Python용으로 설계된 API 제공
    - 신조어 처리: 최신 어휘와 신조어 인식에 강점
    - 사용자 사전: 커스텀 단어 추가가 매우 쉬움 (물품명, 색상 용어 등에 유용)

- 모호성 해소 성능 평가 결과는 Bareun이 83.1%, Kiwi가 75.2%

### clip-matching
- clip 한국어 모델 기반으로 게시글간 유사도를 카테고리, 물품명, 색상, 설명, 장소를 통해 유사도 비교

### clip-matching_v2
- 형태소 분석기 모델 적용 : Kiwi
- 장소로 유사도를 비교하는 코드는 제외함

- 사용자 게시글과 습득물 데이터 간의 유사도 계산
- 한국어 CLIP 모델을 사용한 텍스트-이미지 유사도 분석
- Kiwi 형태소 분석기를 활용한 정확한 한국어 키워드 추출
- 경찰청 API를 통한 습득물 데이터 수집
- 카테고리, 물품명, 색상 등 다양한 속성 가중치 적용
- '기타' 카테고리 내용 분석 지원

#### 변경사항의 이점
- 더 정확한 한국어 키워드 추출:
    - 조사와 어미가 올바르게 분리됩니다 (예: "지갑을" → "지갑")
    - 복합 명사도 올바르게 처리됩니다 (예: "에어팟프로" → "에어팟", "프로")
    - 형용사도 추출하여 색상 표현을 더 잘 인식합니다
- 더 정확한 유사도 계산:
    - 핵심 키워드 중심으로 유사도를 계산하여 정확도 향상
    - 불필요한 조사, 어미로 인한 노이즈 감소
- 집중된 유사도 계산:
    - 위치 정보 제거로 물품 특성(카테고리, 물품명, 색상)에 더 집중
- 결론
    - 이제 시스템은 더 정확한 한국어 텍스트 분석을 통해 습득물 매칭의 정확도가 높아졌습니다. 특히 "지갑을 분실했어요"와 "지갑"처럼 조사가 있는 경우에도 올바르게 키워드를 추출하여 유사도를 계산할 수 있다.

이제 시스템이 다음과 같은 방식으로 키워드를 더 정확하게 추출합니다:
- 예시
    - "검은색 가죽 지갑을 잃어버렸습니다" → ["검은색", "가죽", "지갑", "잃어버리다"]
    - "블랙색 에어팟 프로를 분실했어요" → ["블랙색", "에어팟", "프로", "분실하다"]

## Spark + AI 활용
- spark에서 1차적으로 게시글의 카테고리를 보고 1차 필터링 후 카테고리가 유사하다고 spark에서 분류된 게시글만 fast api에 보내서 임베딩 생성 + 유사도 측정
